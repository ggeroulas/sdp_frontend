<!DOCTYPE html>
<html>
	<head>
		<title>eJournal | Sign Up</title>
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>
	<body>
		<div class="container">
			<div class="header">
				<h1 class="header_title">eJournal</h1>
			</div>
			<div class="content">
				<div class="welcome_box">
					<div class="welcome">
						<h2 class="welcome_title">Sign Up</h2>
					</div>
					<div class="form">
                        <form action="reg.html" method="post">
                        <input type="hidden" name="submitted" value="yes"/>
							<div id="first">
								<input type="text" name="firstName" placeholder="First Name" />
							</div>
							<div id="last">
								<input type="text" name="lastName" placeholder="Last Name" />
							</div>
						<br />
						<input type="email" name="emailAddress" placeholder="Email Address" />
						<br />
						<br />
						<input type="text" name="username" placeholder="Username" />
						<br />
						<br />
						<input type="password" name="password" placeholder="Password" />
						<br />
						<br />
						<input type="password" name="confirmPassword" placeholder="Confirm Password" />
						<br />
						<br />
						<button type="submit">Sign Up</button>
						<br />
						<br />
                        <a href="login.html">Sign In</a>
                        
                        <script>
                            var firstnm = document.getElementsByClassName("form").elements["firstName"];
                            var lastnm = document.getElementsByClassName("form").elements["lastName"];
                            var email = document.getElementsByClassName("form").elements["emailAddress"];
                            var usernm = document.getElementsByClassName("form").elements["username"];
                            var passwrd = document.getElementsByClassName("form").elements["password"];
                            var submt = document.getElementsByClassName("form").elements("submitted");

							function checkName(first, last) {
								// checks that the name in the field is valid
								var valid = false;
								var re = new RegExp("[A-Z][a-z]+");
								if (re.test(first) && re.test(last)) {
    								valid = true;
								} 
								
								return valid;
							}

							function checkEmail(email) {
								var re = new RegExp("[A-Za-z\._]+@([a-z_]+\.)+[a-z_]+");
								if (re.test(email)) {
									return true;
								} else {

									return false;
								}
								// checks that email is valid
							}

							function checkPassword(password) {
								var valid = false;
								var re = new RegExp("[A-Za-z0-9]{6,}");
								if (password.length() < 7) {
									if (re.test(password)) {
										valid = true;
									}

								} 
								return valid;
								// check that passwords match
								// checks that password is valid
							}

							function checkUsername() {

								// checks that username is unique
							}

							function validate() {
								var valid = false;
								if (submt!= null && submt == yes) {
                                	if (checkName()) {
                                		if (checkEmail()) {
											if (checkPassword()) {
												if (checkUsername()) {
													valid = true;
												} else {
													alert ("Username already exists;");
												} 

											} else {

												// Error password is not long enough, or doesn't match
												alert ("Password must be at least 6 letters or numbers.");
											}

										} else {

											// Error: Email is invalid
											alert ("Email must be valid.");
										}

                                	} else {

                                		// Error messages: Need to have a valid name!
										alert ("Name must be valid.");
                            		}
								
								} else {

									alert ("All fields must be complete.");
								}
								return valid;
							}

							function signUp() {

								if (validate()) {
									
									var myObj = { "firstname":firstnm, "lastname":lastnm, "email":email, "username":usernm, "password":passwrd };
                            		var myJSON = JSON.stringify(myObj);
                            		//window.location = "demo_json.php?x=" + myJSON;  
									// send store request to server
									// take user to login page

								}

							}

                        </script>
                        </form>
                    </div>
                    
				</div>
			</div>
			<div class="footer">
				<div id="copyright">
					Copyright &copy; 2017 Team 6ess. All rights reserved.
				</div>
			</div>
		</div>
	</body>
</html>